<% title = "Users" %>
<%- include('../partials/head'); %>
<%- include('../partials/nav'); %>

<div class="container-fluid mt-2">
    <div class="table-wrapper">

        <%- include('../partials/pagination'); %>

        <div class="row">
            <div class="col-sm-6">
                <form action="/users" method="GET" class="row">
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="search" value="<%= search %>" placeholder="Search..." style="height: 30px; margin-top: 10px;">
                    </div>
                    <div class="col-sm-2 padding: 0; margin: 0;">
                        <button class="btn btn-primary btn-sm" style="margin-top: 10px;">Search</button>
                    </div>
                </form>
            </div>
        </div>
        
        <p style="margin-top: -20px;">Total: <%= count %></p>

        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Role</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Is Verified</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>

                <% if (users.length === 0) { %>
                    <tr>
                        <td colspan="15">No users found.</td>
                    </tr>
                <% } %>

                <% users.forEach(function(user) { %>
                <tr>
                    <td><%= user.id %></td>
                    <td><%= user.role %></td>
                    <td><%= user.firstName %></td>
                    <td><%= user.lastName %></td>
                    <td><%= user.email %></td>
                    <td><%= user.isVerified %></td>
                    <td><%= user.status %></td>
                    <td>
                        <a href="/users/<%= user.id %>" class="btn btn-sm btn-primary">Details</a>
                        <!-- <a href="/users/<%= user.id %>" class="btn btn-sm btn-danger">Delete</a> -->
                    </td>
                </tr>
                <% }); %>
            </tbody>
        </table>

        <%- include('../partials/pagination'); %>
        
    </div>
</div>


<%- include('../partials/footer'); %>